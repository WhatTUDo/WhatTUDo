<div class="contextual-control">
  <span id="back-button" class="clickable no-hover-enlarge no-shadow" onclick="history.back()"><fa-icon
    [icon]="faChevronLeft"></fa-icon>&ensp;Back</span>
  <span>New User{{user.name ? ": " + user.name : ''}}</span>
</div>
<div class="centered-one-third">
  <h2>New User</h2>
  <div>
    <div class="avatar-container">
      <img alt="" class="avatar avatar-medium" src="{{gravatarLink}}">
    </div>
    <div class="avatar-description">You can change your profile picture using <a
      href="https://en.gravatar.com" target="_blank">Gravatar</a>.
    </div>
  </div>
  <form #userRegistrationForm="ngForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="username" class="control-label">Username</label>
      <div>
        <input type="text" [(ngModel)]="user.name" class="form-control" autocomplete="username"
               required maxlength="255" id="username" name="username" #username="ngModel">
        <div class="jasmine-errored" [hidden]="username.valid || username.pristine">
          <small class="form-text text-warning">This username is too long!</small>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="email" class="control-label">Email</label>
      <div>
        <input type="email" [(ngModel)]="user.email" class="form-control" autocomplete="email" id="email"
               email (change)="emailUpdated()" name="email" #email="ngModel">
        <div class="jasmine-errored" [hidden]="email.valid || email.pristine">
          <small class="form-text text-warning">Please enter a valid email!
          </small>
        </div>
      </div>
      <div class="form-group">
        <label for="password" class="control-label">Password</label>
        <div>
          <input type="password" [(ngModel)]="password" class="form-control" autocomplete="new-password"
                 minlength="8" required passwordrules="minlength: 8;" id="password"
                 name="password" #passwordField="ngModel">
          <div class="jasmine-errored" [hidden]="passwordField.valid || passwordField.pristine">
            <small class="form-text text-warning" *ngIf="passwordField.hasError('required')">
              Please enter your password!
            </small>
            <small class="form-text text-warning" *ngIf="passwordField.hasError('minlength')">
              Please make your password longer!
            </small>
          </div>
        </div>
      </div>
      <div>
        <button class="button-green" type="submit" [disabled]="!userRegistrationForm.valid">Create Account</button>
      </div>
    </div>
  </form>
</div>
